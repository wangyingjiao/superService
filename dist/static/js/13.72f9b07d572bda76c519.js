webpackJsonp([13],{"4GzL":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"box"},[i("div",{staticClass:"filter-container bgWhite",staticStyle:{"padding-bottom":"20px"}},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"请输入搜索的技能名称"},model:{value:t.localSearch,callback:function(e){t.localSearch=e},expression:"localSearch"}}),t._v(" "),i("button",{staticClass:"search-button btn_right el-icon-search",on:{click:t.search}},[t._v(" 搜索")])],1),t._v(" "),i("div",{staticClass:"app-container calendar-list-container"},[i("div",{},[i("div",{staticClass:"bgWhite"},[-1!=t.qunxian.indexOf("ser_add")?i("button",{staticClass:"button-small btn_right btn_pad ceshi ceshi5",staticStyle:{"margin-top":"-5px"},on:{click:function(e){t.add("add")}}},[t._v("新       增")]):t._e(),t._v(" "),i("div",{staticStyle:{"padding-top":"15px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.getListdata,stripe:"","highlight-current-row":"","element-loading-text":"正在加载"}},[i("el-table-column",{attrs:{align:"center",label:"编号",width:"100",type:"index"}}),t._v(" "),i("el-table-column",{attrs:{label:"技能名称",align:"center",prop:"name"}}),t._v(" "),i("el-table-column",{attrs:{label:"技师个数",align:"center",prop:"technicianNum"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{staticClass:"el-icon-edit",on:{click:function(i){t.add("edit",e.row)}}}),t._v(" "),i("el-button",{staticClass:"el-icon-delete",on:{click:function(i){t.handleDelete(e.row)}}})]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading,expression:"!listLoading"}],staticClass:"pagination-container",staticStyle:{float:"right","margin-top":"20px"}},[i("el-pagination",{attrs:{layout:"total, sizes, prev, pager, next, jumper","page-size":t.pageSize,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)]),t._v(" "),i("el-dialog",{attrs:{title:"新增技能",visible:t.dialogVisible,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm2,rules:t.rules,"label-width":"130px","label-position":"left"}},[i("el-form-item",{attrs:{label:"技能名称",prop:"name"}},[i("el-input",{staticStyle:{width:"300px"},model:{value:t.ruleForm2.name,callback:function(e){t.ruleForm2.name=e},expression:"ruleForm2.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"选择服务",prop:"serItems"}},[i("el-select",{staticClass:"filter-item",staticStyle:{width:"130px",display:"none"},attrs:{multiple:"",placeholder:"请选择市"},on:{change:t.cityChange},model:{value:t.ruleForm2.serItems,callback:function(e){t.ruleForm2.serItems=e},expression:"ruleForm2.serItems"}},t._l(t.ruleForm2.serItems,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),t._v(" "),i("div",{staticClass:"tech-order-jnsk",staticStyle:{float:"left",width:"500px"}},[i("button",{staticClass:"tech-order-btnsk",on:{click:t.choseServer}},[t._v("✚ 请选择")])]),t._v(" "),i("el-table",{staticStyle:{width:"500px",margin:"0px",float:"left"},attrs:{data:t.ruleForm2.serItems,border:""}},[i("el-table-column",{attrs:{prop:"itemName",label:"项目名称",width:"100",height:"30",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{prop:"serItemCommoditys",label:"商品名称",width:"180",align:"center"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("button",{staticClass:"skill-delte",on:{click:function(i){t.staticDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"选择技师",prop:"technicians"}},[i("div",{staticClass:"tech-order-jnsk",staticStyle:{float:"left",width:"500px"}},[i("div",{staticClass:"tech-order-btnsk",staticStyle:{background:"none"},on:{click:t.orderTech}},[t._v(" ✚ 请选择")])])]),t._v(" "),i("el-form-item",{attrs:{label:""}},t._l(t.tabOptions,function(e){return i("div",{key:e.technicianId,staticClass:"tabWrap"},[t._v("\n                    "+t._s(e.techName)+"\n                    "),i("div",{staticClass:"closePic",on:{click:function(i){t.errorClose(e)}}},[t._v("✕")])])}))],1),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},slot:"footer"},[i("button",{staticClass:"button-large",on:{click:function(e){t.submitForm("ruleForm2")}}},[t._v("保存")]),t._v(" "),i("button",{staticClass:"button-cancel",on:{click:function(e){t.resetForm("ruleForm2")}}},[t._v("取消")])])],1),t._v(" "),i("el-dialog",{attrs:{title:"选择服务",visible:t.flagserver,"close-on-click-modal":!1},on:{"update:visible":function(e){t.flagserver=e}}},[i("div",{staticStyle:{float:"left"}},[i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"输入要搜索的项目名称"},model:{value:t.xingmu,callback:function(e){t.xingmu=e},expression:"xingmu"}})],1),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("button",{staticClass:"button-large",on:{click:t.quiry}},[t._v("查询")])]),t._v(" "),i("div",{staticStyle:{float:"left","margin-top":"20px",width:"100%","margin-bottom":"20px"}},[i("ul",{staticClass:"role-table"},[i("li",{staticClass:"header"},[i("div",{staticClass:"left"},[t._v("项目名称")]),t._v(" "),i("div",{staticClass:"right"},[t._v("商品名称")])]),t._v(" "),i("div",{staticClass:"vertical-line"}),t._v(" "),t._l(t.listorderServer,function(e){return i("li",{key:e.itemId},[i("div",{staticClass:"left h40"},[i("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},nativeOn:{click:function(i){t.handleOneCheckAll(i,e)}},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"item.checkAll"}},[t._v(" "+t._s(e.itemName))])],1),t._v(" "),i("div",{staticClass:"right h40"},[i("el-checkbox-group",{on:{change:function(i){t.handleOneCheckedCitiesChange(e)}},model:{value:e.checkedCities,callback:function(t){e.checkedCities=t},expression:"item.checkedCities"}},t._l(e.commoditys,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(" "+t._s(e.name))])}))],1),t._v(" "),i("div",{staticClass:"line"})])})],2)]),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},slot:"footer"},[i("button",{staticClass:"button-large",on:{click:function(e){t.submitForm1()}}},[t._v("保存")]),t._v(" "),i("button",{staticClass:"button-cancel",on:{click:function(e){t.resetForm1()}}},[t._v("取消")])])]),t._v(" "),i("el-dialog",{attrs:{title:"选择服务人员",visible:t.ordertech,modal:!1,"modal-append-to-body":!1,"close-on-click-modal":!1},on:{"update:visible":function(e){t.ordertech=e}}},[i("div",{staticStyle:{float:"left",width:"120px"}},[i("el-input",{staticStyle:{width:"120px"},attrs:{placeholder:"输入要搜索的姓名"},model:{value:t.techName,callback:function(e){t.techName=e},expression:"techName"}})],1),t._v(" "),i("div",{staticStyle:{float:"left","margin-left":"10px"}},[i("el-select",{attrs:{clearable:"",placeholder:"请选择服务站"},model:{value:t.techStationId,callback:function(e){t.techStationId=e},expression:"techStationId"}},t._l(t.options,function(t){return i("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),i("div",{staticStyle:{float:"right"}},[i("button",{staticClass:"button-large",on:{click:t.searchTeh}},[t._v("查询")])]),t._v(" "),i("div",{staticStyle:{float:"left","margin-top":"20px",width:"100%","margin-bottom":"20px"}},[i("div",{staticClass:"table-d"},[i("table",{attrs:{width:"100%",border:"0",cellspacing:"1",cellpadding:"0"}},[i("tr",[i("td",{staticStyle:{background:"#F8F8F9",height:"30px"},attrs:{align:"center",width:"8%"}},[t._v("选择")]),t._v(" "),i("td",{staticStyle:{background:"#F8F8F9",height:"30px"},attrs:{align:"center",width:"28%"}},[t._v("头像")]),t._v(" "),i("td",{staticStyle:{background:"#F8F8F9",height:"30px"},attrs:{align:"center",width:"28%"}},[t._v("姓名")]),t._v(" "),i("td",{staticStyle:{background:"#F8F8F9",height:"30px"},attrs:{align:"center",width:"10%"}},[t._v("性别")]),t._v(" "),i("td",{staticStyle:{background:"#F8F8F9",height:"30px"},attrs:{align:"center",width:"26%"}},[t._v("服务站")])]),t._v(" "),t._l(t.listTech,function(e){return i("tr",{key:e.id},[i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},[i("el-checkbox",{model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}})],1),t._v(" "),i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},[t._v(t._s(e.imgUrl))]),t._v(" "),i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},[t._v(t._s(e.techName))]),t._v(" "),i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},["1"==e.techSex?i("span",[t._v("男")]):t._e(),t._v(" "),"2"==e.techSex?i("span",[t._v("女")]):t._e()]),t._v(" "),i("td",{staticStyle:{height:"30px"},attrs:{align:"center"}},[t._v(t._s(e.techStationName))])])})],2)])]),t._v(" "),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},slot:"footer"},[i("button",{staticClass:"button-large",on:{click:function(e){t.submitForm2()}}},[t._v("保存")]),t._v(" "),i("button",{staticClass:"button-cancel",on:{click:function(e){t.resetForm2()}}},[t._v("取消")])])])],1)])])},n=[],s={render:a,staticRenderFns:n};e.a=s},RwLW:function(t,e,i){"use strict";function a(t,e,i){return h.post("/api/a/service/skill/serSkillInfo/choiceTechnicianlistData?pageNo="+e+"&pageSize="+i,t)}function n(t,e,i){return h.post("/api/a/service/skill/serSkillInfo/listData?pageNo="+e+"&pageSize="+i,t)}function s(){return h.get("/api/a/service/skill/serSkillInfo/getServiceStationList")}function l(t){return h.post("/api/a/service/skill/serSkillInfo/saveData",t)}function r(t,e,i){return h.post("/api/a/service/skill/serSkillInfo/choiceSerlistData?pageNo="+e+"&pageSize="+i,t)}function o(t){return h.post("/api/a/service/skill/serSkillInfo/deleteSortInfo",t)}e.f=a,e.b=n,e.e=s,e.a=l,e.d=r,e.c=o;var c=i("mtWM"),d=i.n(c),h=d.a.create({headers:{"content-type":"application/json;charset=UTF-8"}})},czMV:function(t,e,i){"use strict";var a=i("woOf"),n=i.n(a),s=i("RwLW");e.a={name:"",data:function(){return{checkAll:!1,qunxian:["ser_add","ser_edit"],localSearch:"",tabOptions:{},techShow:!1,techName:"",techStationId:"",rules:{name:[{required:!0,message:"请输入技能名称",trigger:"blur"},{min:2,max:15,message:"长度在 2 到 15 个字符",trigger:"blur"}],serItems:[{type:"array",required:!0,message:"请选择技能",trigger:"change"}]},ruleForm2:{name:"",serItems:[],technicians:[]},commodityse:{},options:[],checkbox:!1,getListdata:[],ordertech:!1,xingmu:"",list:[1,2,3],listTech:{},listorderServer:[],listorderServer1:{},checked:!1,multipleSelection:[],multipleSelection1:[],ortech:!1,total:null,pageSize:10,pageNumber:1,pageNumber1:1,pageNumber2:1,listLoading:!1,dialogVisible:!1,flagserver:!1,dialogFormVisible:!1,dialogStatus:"add",aa:[],test:[],originData:[],id:""}},methods:{cityChange:function(t){},handleOneCheckedCitiesChange:function(t){var e=t.checkedCities.length;void 0===t.isIndeterminate&&this.$set(t,"isIndeterminate",!1),void 0===t.checkAll&&this.$set(t,"checkAll",!1),t.isIndeterminate=e>0&&e<t.commoditys.length,t.checkAll=e===t.commoditys.length},handleOneCheckAll:function(t,e){for(var i=[],a=0;a<e.commoditys.length;a++)i.push(e.commoditys[a].commodityId);e.checkedCities=t.target.checked?i:[]},search:function(){var t={name:this.localSearch};this.getList(t,this.pageNumber,this.pageSize)},add:function(t,e){var i=this;if(this.dialogVisible=!0,this.dialogStatus=t,this.$nextTick(function(){i.getOrderserver()}),this.$nextTick(function(){i.getorderTech()}),this.originData=[],this.tabOptions={},"add"==this.dialogStatus)this.ruleForm2={},this.id="",this.ruleForm2.name="";else if("edit"==this.dialogStatus){if(this.ruleForm2={},this.id=e.id,this.ruleForm2.name=e.name,this.ruleForm2.serItems=e.serItems,this.ruleForm2.serItems.length)for(var a=e.serItems,n=0;n<a.length;n++){for(var s=a[n].serItemCommoditys.length,l="",r=0;r<s;r++)a[n].serItemCommoditys[r].commodityName&&(l+=","+a[n].serItemCommoditys[r].commodityName);l&&(this.ruleForm2.serItems[n].serItemCommoditys=l.substring(1))}this.tabOptions=e.technicians}},selectionreturn:function(){},selectionreturn1:function(){},submitForm:function(t){var e=this;if(this.ruleForm2.technicians=this.tabOptions,this.ruleForm2.serItems.length)for(var a=0;a<this.ruleForm2.serItems.length;a++)for(var n=this.ruleForm2.serItems[a].itemId,l=0;l<this.listorderServer1.length;l++){var r=this.listorderServer1[l].itemId;n==r&&this.originData.push(this.listorderServer1[l])}this.$refs[t].validate(function(t){if(!t)return!1;var a={id:e.id,name:e.ruleForm2.name,technicians:e.ruleForm2.technicians,serItems:e.originData};i.i(s.a)(a).then(function(t){e.dialogVisible=!1;var i={};e.listLoading=!1,e.getList(i,e.pageNumber,e.pageSize)}).catch(function(t){e.listLoading=!1})})},resetForm:function(t){"add"==this.dialogStatus&&(this.ruleForm2.name="",this.ruleForm2={},this.$refs[t].resetFields()),"edit"==this.dialogStatus&&(this.ruleForm2.name=""),this.dialogVisible=!1},staticDelete:function(t){this.ruleForm2.serItems.length&&this.ruleForm2.serItems.remove(t)},errorClose:function(t){this.tabOptions.length&&this.tabOptions.remove(t)},submitForm1:function(){this.ruleForm2.serItems=this.listorderServer,this.flagserver=!1},resetForm1:function(){this.flagserver=!1},submitForm2:function(){this.tabOptions=n()({},this.listTech),this.ordertech=!1},resetForm2:function(){this.ordertech=!1},getList:function(t,e,a){var n=this;this.listLoading=!0;var l=t;i.i(s.b)(l,e,a).then(function(t){n.getListdata=t.data.data.list,n.listLoading=!1,n.total=t.data.data.count}).catch(function(t){n.listLoading=!1})},handleSizeChange:function(t){this.pageSize=t;var e={name:this.localSearch};this.getList(e,this.pageNumber,this.pageSize)},handleCurrentChange:function(t){this.pageNumber=t;var e={};this.getList(e,this.pageNumber,this.pageSize)},handleDelete:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var a={id:t.id};i.i(s.c)(a).then(function(t){1===t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.getList()):e.$message({type:"warning",message:"分类下有服务项目，不可删除"})}).catch(function(){return console.log("未知错误")})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},choseServer:function(){var t=this;this.flagserver=!0,this.$nextTick(function(){t.getOrderserver()})},getOrderserver:function(t,e,a){var n=this,l=t;i.i(s.d)(l,e,a).then(function(t){1===t.data.code&&(n.listorderServer=t.data.data.list,console.log(n.listorderServer))}).catch(function(t){})},orderTech:function(){var t=this;this.ordertech=!0,this.$nextTick(function(){t.getorderTech()})},getorderTech:function(t,e,a){var n=this;i.i(s.e)().then(function(t){n.options=t.data});var l=t;i.i(s.f)(l,e,a).then(function(t){1===t.data.code&&(n.listTech=t.data.data.list)}).catch(function(t){})},quiry:function(){var t={itemName:this.xingmu};this.getOrderserver(t)},searchTeh:function(){var t={technicianName:this.techName,techStationId:this.techStationId};this.getorderTech(t)}},mounted:function(){this.getList()}}},dnU6:function(t,e,i){var a=i("h9Qf");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("b6f1f2f0",a,!0)},h9Qf:function(t,e,i){e=t.exports=i("FZ+f")(!1),e.push([t.i,".table-d table[data-v-b3cea6e0]{background:#ddd}.table-d table td[data-v-b3cea6e0]{background:#fff}.tabWrap[data-v-b3cea6e0]{width:100px;margin-right:20px;font-size:12px;display:inline-block;height:25px;text-align:center;line-height:25px;border-radius:12px;border:1px solid #bfcbd9;position:relative}.closePic[data-v-b3cea6e0]{cursor:pointer;color:#bfcbd9;font-size:12px;position:absolute;margin-left:80px;top:0}.bgWhite[data-v-b3cea6e0]{background-color:#fff;padding:20px;padding-bottom:70px}.btn_pad[data-v-b3cea6e0]{margin:0 0 10px 20px}.btn_right[data-v-b3cea6e0]{float:right}.tech-order-jnsk[data-v-b3cea6e0]{width:400px;height:36px;border:1px solid #bfcbd9;position:relative;line-height:36px}.tech-order-btnsk[data-v-b3cea6e0]{background:#fff;color:#4c70e8;border:none;outline:none;cursor:pointer;margin-left:10px}.skill-delte[data-v-b3cea6e0]{border:none;background:none;width:100px;height:50px;color:red;outline:none;cursor:pointer}.role-table[data-v-b3cea6e0]{list-style:none;border:1px solid #e0e0e0;border-bottom:none;padding:0;position:relative}.header[data-v-b3cea6e0]{height:40px;line-height:40px;border-bottom:1px solid #e7e7e7;background:#f8f8f9;text-align:center}.vertical-line[data-v-b3cea6e0]{width:1px;height:100%;background:#ddd;position:absolute;left:30%;top:0}.left[data-v-b3cea6e0]{width:30%;float:left;padding-left:10px;text-align:left;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer}.one[data-v-b3cea6e0]{padding-left:20px}.right[data-v-b3cea6e0]{width:70%;float:left;padding-left:10px}.item-icon[data-v-b3cea6e0]{margin-left:-5px;padding:5px}.line[data-v-b3cea6e0]{clear:both;width:100%;height:1px;background:#e0e0e0}.h40[data-v-b3cea6e0]{height:39px;line-height:39px}[v-cloak][data-v-b3cea6e0]{display:none}",""])},mW4B:function(t,e,i){"use strict";function a(t){i("dnU6")}Object.defineProperty(e,"__esModule",{value:!0});var n=i("czMV"),s=i("4GzL"),l=i("VU/8"),r=a,o=l(n.a,s.a,r,"data-v-b3cea6e0",null);e.default=o.exports}});