webpackJsonp([19],{"2rLn":function(e,t,i){t=e.exports=i("FZ+f")(!1),t.push([e.i,"",""])},"7ted":function(e,t,i){var n=i("2rLn");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("72f89ba9",n,!0)},"F+99":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"addorder-container"},[i("el-upload",{ref:"upload",attrs:{action:"http://openservice.oss-cn-beijing.aliyuncs.com","list-type":"picture-card","on-change":e.handPic,"on-remove":e.handleRemovePic,"auto-upload":!1,"file-list":e.picList,"http-request":function(t){return e.picUpload(t)}}},[i("i",{staticClass:"el-icon-plus"})]),e._v(" "),i("el-dialog",{attrs:{size:"tiny"},model:{value:e.dialogVisible,callback:function(t){e.dialogVisible=t},expression:"dialogVisible"}},[i("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),i("button",{on:{click:e.open}},[e._v("全")])],1)},a=[],s={render:n,staticRenderFns:a};t.a=s},Vc3t:function(e,t,i){"use strict";function n(){var e={};return c.a.get("sign")?e=JSON.parse(c.a.get("sign")):o.a.get("/apiservice/oss/getSign").then(function(t){console.log(t.data,"签名");var i=t.data;c.a.set("sign",s()(i)),e=JSON.parse(c.a.get("sign"))}),e}t.a=n;var a=i("mvHQ"),s=i.n(a),o=i("Vo7i"),l=i("lbHh"),c=i.n(l)},b6LW:function(e,t,i){"use strict";function n(e){i("7ted")}Object.defineProperty(t,"__esModule",{value:!0});var a=i("ii9V"),s=i("F+99"),o=i("VU/8"),l=n,c=o(a.a,s.a,l,"data-v-a5354ebc",null);t.default=c.exports},ii9V:function(e,t,i){"use strict";var n=i("mvHQ"),a=i.n(n),s=i("//Fk"),o=i.n(s),l=i("lbHh"),c=i.n(l),r=i("Vc3t");t.a={data:function(){return{picList:[],dialogVisible:!1,dialogImageUrl:""}},methods:{open:function(){this.$refs.upload.submit()},handPic:function(e,t){this.imgFlag=!0;var i=new Date,n=i.getFullYear(),a=i.getMonth()+1,s=i.getDate();this.sign.dir,e.name;console.log(t,"fileList---------"),t.length>3&&(this.$message({type:"warning",message:"最多上传4张图片"}),t.splice(t.indexOf(e),1)),console.log(t,"fileList+++++")},handleRemovePic:function(e,t){if(alert("dawdawd"),!this.imgFlag)return!1;var i="",n=e.url.lastIndexOf("/");i=e.url.substring(n+1,e.url.length);var a="";a=void 0!=e.name?e.name:i,console.log(a,"src");for(var s=[],o=0;o<this.picFile.length;o++){var n=this.picFile[o].lastIndexOf("/"),l="";l=this.picFile[o].substring(n+1,this.picFile[o].length),s.push(l)}var c=s.indexOf(a);-1==c||this.picFile.del(c),console.log(c,"delIndex------")},picUpload:function(e){var t=this;console.log(e,"file----------");var i=this;new o.a(function(e,i){console.log(JSON.parse(c.a.get("sign")),"测试1111");var n=JSON.parse(c.a.get("sign")),s=Date.parse(new Date)/1e3;n.expire-3>s?(console.log("签名没过期"),e(n)):t.$http.get("/apiservice/oss/getSign").then(function(t){console.log(t,"签名过期"),c.a.set("sign",a()(t.data)),e(t.data)})}).then(function(n){var a=n,s=new FormData,o=new Date,l=o.getTime(),c=o.getFullYear(),r=o.getMonth()+1,g=o.getDate();s.append("name",e.file.name),s.append("key",a.dir+"/"+c+"/"+r+"/"+g+"/"+l+".jpg"),s.append("policy",a.policy),s.append("OSSAccessKeyId",a.accessid),s.append("success_action_status",201),s.append("signature",a.signature),s.append("file",e.file,e.file.name),i.$http.post(a.host,s,{headers:{"Content-Type":"multipart/form-data; boundary={boundary}"}}).then(function(e){console.log(t.picList),t.picFile.push(s.get("key")),console.log(t.picFile,"picfile")}).catch(function(e){console.log("错误-------------上传图片失败--"),console.log(e,"错误")})})}},computed:{sign:function(){return console.log("-------------------------------"),i.i(r.a)()}},mounted:function(){}}}});